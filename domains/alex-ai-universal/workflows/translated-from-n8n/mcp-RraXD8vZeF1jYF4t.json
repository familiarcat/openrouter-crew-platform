{
  "id": "mcp-RraXD8vZeF1jYF4t",
  "name": "Knowledge Archive (RAG DELETE - Soft Delete)",
  "description": "Converted from n8n workflow: Knowledge Archive (RAG DELETE - Soft Delete)",
  "version": "1.0.0",
  "active": true,
  "nodes": [
    {
      "id": "26af51e3-7053-4c78-9585-fd8ef2dc5040",
      "name": "Webhook Trigger",
      "type": "mcp.webhook",
      "originalType": "n8n-nodes-base.webhook",
      "position": [
        250,
        300
      ],
      "parameters": {
        "httpMethod": "POST",
        "path": "knowledge-archive",
        "responseMode": "responseNode",
        "options": {}
      },
      "webhookInfo": {
        "path": "knowledge-archive",
        "method": "POST",
        "responseMode": "responseNode",
        "note": "‚ö†Ô∏è WEBHOOK EXECUTION POINT: This webhook can be executed via MCP at /api/workflows/execute with webhook path"
      },
      "metadata": {
        "converted": true,
        "originalNode": "Webhook Trigger"
      }
    },
    {
      "id": "bad0f88a-e1bf-404b-8a70-7da09d0d441a",
      "name": "Validate Archive",
      "type": "mcp.transform",
      "originalType": "n8n-nodes-base.function",
      "position": [
        450,
        300
      ],
      "parameters": {
        "functionCode": "// Validate archive request (soft delete)\nconst body = $input.item.json.body;\n\nif (!body.session_id) {\n  throw new Error('session_id is required for archiving');\n}\n\nconst archiveData = {\n  session_id: body.session_id,\n  archive_reason: body.reason || 'Manual archive',\n  archived_by: body.archived_by || 'system',\n  archived_at: new Date().toISOString()\n};\n\nconsole.log('üóÑÔ∏è Archiving knowledge:', archiveData.session_id, '| Reason:', archiveData.archive_reason);\n\nreturn { json: archiveData };"
      },
      "webhookInfo": null,
      "metadata": {
        "converted": true,
        "originalNode": "Validate Archive"
      }
    },
    {
      "id": "43d53385-06e6-4b2a-a9b3-7d2618ef780a",
      "name": "Supabase Soft Delete",
      "type": "mcp.database",
      "originalType": "n8n-nodes-base.supabase",
      "position": [
        650,
        300
      ],
      "parameters": {
        "operation": "delete",
        "table": "knowledge_base",
        "filters": {
          "conditions": [
            {
              "column": "session_id",
              "condition": "equals",
              "value": "={{ $json.session_id }}"
            }
          ]
        }
      },
      "webhookInfo": null,
      "metadata": {
        "converted": true,
        "originalNode": "Supabase Soft Delete"
      }
    },
    {
      "id": "1a92999a-a0b2-4113-ad75-090ad3ba0000",
      "name": "Response Success",
      "type": "mcp.response",
      "originalType": "n8n-nodes-base.respondToWebhook",
      "position": [
        850,
        300
      ],
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { \"success\": true, \"session_id\": $json.session_id, \"message\": \"Knowledge archived successfully\", \"timestamp\": $now } }}",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      },
      "webhookInfo": null,
      "metadata": {
        "converted": true,
        "originalNode": "Response Success"
      }
    }
  ],
  "edges": [
    {
      "id": "edge-Webhook Trigger-Validate Archive",
      "source": "Webhook Trigger",
      "target": "Validate Archive",
      "sourceHandle": "main-0",
      "targetHandle": "input"
    },
    {
      "id": "edge-Validate Archive-Supabase Soft Delete",
      "source": "Validate Archive",
      "target": "Supabase Soft Delete",
      "sourceHandle": "main-0",
      "targetHandle": "input"
    },
    {
      "id": "edge-Supabase Soft Delete-Response Success",
      "source": "Supabase Soft Delete",
      "target": "Response Success",
      "sourceHandle": "main-0",
      "targetHandle": "input"
    }
  ],
  "webhookExecutionPoints": [
    {
      "nodeId": "26af51e3-7053-4c78-9585-fd8ef2dc5040",
      "nodeName": "Webhook Trigger",
      "webhookPath": "knowledge-archive",
      "webhookMethod": "POST",
      "mcpExecutionPath": "/api/workflows/execute?webhook=knowledge-archive",
      "note": "‚ö†Ô∏è WEBHOOK EXECUTION POINT: This webhook can be executed via MCP at /api/workflows/execute with webhook path"
    }
  ],
  "metadata": {
    "originalWorkflowId": "RraXD8vZeF1jYF4t",
    "convertedAt": "2025-11-21T14:24:04.674Z",
    "originalName": "Knowledge Archive (RAG DELETE - Soft Delete)"
  }
}